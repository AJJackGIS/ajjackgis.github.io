<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Cesium-剖面分析 | 咖啡GIS的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Cesium 是一款面向三维地球和地图的，世界级的JavaScript开源产品。它提供了基于JavaScript语言的开发包，方便用户快速搭建一款零插件的虚拟地球Web应用，并在性能，精度，渲染质量以及多平台，易用性上都有高质量的保证。  剖面分析 剖面分析从网上找不到比较合理的定义说明，最初是一种犯罪调差方法。 Geographic profiling is a criminal investi">
<meta name="keywords" content="Cesium,剖面分析">
<meta property="og:type" content="article">
<meta property="og:title" content="Cesium-剖面分析">
<meta property="og:url" content="http://www.kfgis.site/2019/10/08/poumianfenxi/index.html">
<meta property="og:site_name" content="咖啡GIS的个人博客">
<meta property="og:description" content="Cesium 是一款面向三维地球和地图的，世界级的JavaScript开源产品。它提供了基于JavaScript语言的开发包，方便用户快速搭建一款零插件的虚拟地球Web应用，并在性能，精度，渲染质量以及多平台，易用性上都有高质量的保证。  剖面分析 剖面分析从网上找不到比较合理的定义说明，最初是一种犯罪调差方法。 Geographic profiling is a criminal investi">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://images.xiaozhuanlan.com/photo/2019/9dfde213cd4b1c1c11a13b94a7e640d8.jpg">
<meta property="og:updated_time" content="2019-10-08T11:51:24.382Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cesium-剖面分析">
<meta name="twitter:description" content="Cesium 是一款面向三维地球和地图的，世界级的JavaScript开源产品。它提供了基于JavaScript语言的开发包，方便用户快速搭建一款零插件的虚拟地球Web应用，并在性能，精度，渲染质量以及多平台，易用性上都有高质量的保证。  剖面分析 剖面分析从网上找不到比较合理的定义说明，最初是一种犯罪调差方法。 Geographic profiling is a criminal investi">
<meta name="twitter:image" content="https://images.xiaozhuanlan.com/photo/2019/9dfde213cd4b1c1c11a13b94a7e640d8.jpg">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">咖啡GIS的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">所有文章</a>
        
        <a class="main-nav-link" href="./works">作品</a>
      </nav>
      <nav id="sub-nav">
        
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.kfgis.site"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-poumianfenxi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/08/poumianfenxi/" class="article-date">
  <time datetime="2019-10-08T10:17:40.000Z" itemprop="datePublished">2019-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Cesium-剖面分析
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Cesium 是一款面向三维地球和地图的，世界级的JavaScript开源产品。它提供了基于JavaScript语言的开发包，方便用户快速搭建一款零插件的虚拟地球Web应用，并在性能，精度，渲染质量以及多平台，易用性上都有高质量的保证。 </p>
<h2 id="剖面分析"><a href="#剖面分析" class="headerlink" title="剖面分析"></a>剖面分析</h2><hr>
<p>剖面分析从网上找不到比较合理的定义说明，最初是一种犯罪调差方法。</p>
<p>Geographic profiling is a criminal investigative methodology that analyzes the locations of a connected series of crimes to determine the most probable area of offender residence. By incorporating both qualitative and quantitative methods, it assists in understanding spatial behaviour of an offender and focusing the investigation to a smaller area of the community.</p>
<p>谷歌给的翻译是：</p>
<p>地理概况分析是一种刑事调查方法，分析一系列相关犯罪的位置，以确定最可能的犯罪者居住区域。 通过结合定性和定量方法，它有助于理解罪犯的空间行为，并将调查重点放在社区的较小区域。</p>
<p>简单的说，地理学上的剖面分析，是从其中一个维度去比较、衡量、分析一组样本的区别，然后定性、定量给出结论的一种分析方法，比如科学家们研究人类，从年龄这个维度可以把人归纳成幼儿、成人、老人等。</p>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="https://images.xiaozhuanlan.com/photo/2019/9dfde213cd4b1c1c11a13b94a7e640d8.jpg" alt></p>
<a id="more"></a>

<h2 id="具体做法"><a href="#具体做法" class="headerlink" title="具体做法"></a>具体做法</h2><hr>
<p><strong>原理：采用采样法法来获取指定位置的地形高度</strong></p>
<p><strong>接口API</strong></p>
<ul>
<li>ScreenSpaceEventHandler</li>
<li>CallbackProperty</li>
<li>sampleTerrainMostDetailed</li>
<li>ClassificationType</li>
</ul>
<p><strong>具体步骤</strong></p>
<p>1.初始化cesium地球，并设置地形服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var terrainProvider = Cesium.createWorldTerrain();</span><br><span class="line">var viewer = new Cesium.Viewer(&apos;cesiumContainer&apos;, &#123;</span><br><span class="line">	terrainProvider: terrainProvider</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>2.指定要研究的区域</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">viewer.camera.setView(&#123;</span><br><span class="line">	destination: new Cesium.Cartesian3(-548184.7982559408, 5512367.059463563, 3173625.2210259973),</span><br><span class="line">	orientation: &#123;</span><br><span class="line">		heading: 5.683499859605618,</span><br><span class="line">		pitch: -0.3430291183891061,</span><br><span class="line">		roll: 6.281444671468591</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>3.绘制剖面分析的起始点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">viewer.screenSpaceEventHandler.setInputAction(function (clickEvent) &#123;</span><br><span class="line">	if (start == null) &#123;</span><br><span class="line">		start = viewer.scene.pickPosition(clickEvent.position);</span><br><span class="line">		drawPoint(start);</span><br><span class="line">		viewer.screenSpaceEventHandler.setInputAction(function (moveEvent) &#123;</span><br><span class="line">			end = viewer.scene.pickPosition(moveEvent.endPosition);</span><br><span class="line">			drawLine();</span><br><span class="line">		&#125;, Cesium.ScreenSpaceEventType.MOUSE_MOVE);</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		end = viewer.scene.pickPosition(clickEvent.position);</span><br><span class="line">		drawPoint(end);</span><br><span class="line">		viewer.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);</span><br><span class="line">		viewer.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE);</span><br><span class="line">		profileAnalyse();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;, Cesium.ScreenSpaceEventType.LEFT_CLICK);</span><br></pre></td></tr></table></figure>

<p>4.根据起始点进行剖面分析</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">function profileAnalyse() &#123;</span><br><span class="line">	var positions = [Cesium.Cartographic.fromCartesian(start)];</span><br><span class="line">	// 插值100个点，点越多模拟越精确，但是效率会低</span><br><span class="line">	var count = 100;</span><br><span class="line">	for (var i = 1; i &lt; count; i++) &#123;</span><br><span class="line">		var cart = Cesium.Cartesian3.lerp(start, end, i / count, new Cesium.Cartesian3());</span><br><span class="line">		positions.push(Cesium.Cartographic.fromCartesian(cart));</span><br><span class="line">	&#125;</span><br><span class="line">	positions.push(Cesium.Cartographic.fromCartesian(end));</span><br><span class="line"></span><br><span class="line">	// 异步使用最精确的地形采样获取地形高度</span><br><span class="line">	var promise = Cesium.sampleTerrainMostDetailed(terrainProvider, positions);</span><br><span class="line">	Cesium.when(promise, function (updatedPositions) &#123;</span><br><span class="line"></span><br><span class="line">		// 处理返回的数据</span><br><span class="line">		var height = [];</span><br><span class="line">		for (var i = 0; i &lt; updatedPositions.length; i++) &#123;</span><br><span class="line">			height.push(updatedPositions[i].height); // 取得高程值</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// 绘制高程走势图</span><br><span class="line">		dom.style.display = &quot;block&quot;;</span><br><span class="line"></span><br><span class="line">		// 使用Echart等图表工具可视化</span><br><span class="line">		if (myChart == null) &#123;</span><br><span class="line">			myChart = echarts.init(dom);</span><br><span class="line">			initChart(height, false);</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			initChart(height, true);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.使用Echart等图表工具绘制剖面图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">function initChart(height, isMerge) &#123;</span><br><span class="line">	var option = &#123;</span><br><span class="line">		title: &#123;</span><br><span class="line">			text: &apos;海拔走势图&apos;</span><br><span class="line">		&#125;,</span><br><span class="line">		tooltip: &#123;</span><br><span class="line">			trigger: &apos;axis&apos;,</span><br><span class="line">			axisPointer: &#123;</span><br><span class="line">				type: &apos;cross&apos;,</span><br><span class="line">				label: &#123;</span><br><span class="line">					backgroundColor: &apos;#6a7985&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		legend: &#123;</span><br><span class="line">			data: [&apos;海拔走势图&apos;]</span><br><span class="line">		&#125;,</span><br><span class="line">		toolbox: &#123;</span><br><span class="line">			feature: &#123;</span><br><span class="line">				saveAsImage: &#123;&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		grid: &#123;</span><br><span class="line">			left: &apos;3%&apos;,</span><br><span class="line">			right: &apos;4%&apos;,</span><br><span class="line">			bottom: &apos;3%&apos;,</span><br><span class="line">			containLabel: true</span><br><span class="line">		&#125;,</span><br><span class="line">		xAxis: [</span><br><span class="line">			&#123;</span><br><span class="line">				type: &apos;category&apos;,</span><br><span class="line">				boundaryGap: false</span><br><span class="line">			&#125;</span><br><span class="line">		],</span><br><span class="line">		yAxis: [</span><br><span class="line">			&#123;</span><br><span class="line">				type: &apos;value&apos;</span><br><span class="line">			&#125;</span><br><span class="line">		],</span><br><span class="line">		series: [</span><br><span class="line">			&#123;</span><br><span class="line">				name: &apos;海拔走势图&apos;,</span><br><span class="line">				type: &apos;line&apos;,</span><br><span class="line">				stack: &apos;总量&apos;,</span><br><span class="line">				label: &#123;</span><br><span class="line">					normal: &#123;</span><br><span class="line">						show: true,</span><br><span class="line">						position: &apos;top&apos;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				areaStyle: &#123;normal: &#123;&#125;&#125;,</span><br><span class="line">				data: height</span><br><span class="line">			&#125;</span><br><span class="line">		]</span><br><span class="line">	&#125;;</span><br><span class="line">	myChart.setOption(option, isMerge);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.kfgis.site/2019/10/08/poumianfenxi/" data-id="ck1hsayp00003swk811noh91u" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cesium/">Cesium</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/剖面分析/">剖面分析</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/10/08/celiang/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Cesium-测量
        
      </div>
    </a>
  
  
    <a href="/2019/10/08/tongshifenxi/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Cesium-通视分析</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cesium/">Cesium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/剖面分析/">剖面分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/地形开挖/">地形开挖</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测量/">测量</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/通视分析/">通视分析</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Cesium/" style="font-size: 20px;">Cesium</a> <a href="/tags/剖面分析/" style="font-size: 10px;">剖面分析</a> <a href="/tags/地形开挖/" style="font-size: 10px;">地形开挖</a> <a href="/tags/测量/" style="font-size: 10px;">测量</a> <a href="/tags/通视分析/" style="font-size: 10px;">通视分析</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/10/08/celiang/">Cesium-测量</a>
          </li>
        
          <li>
            <a href="/2019/10/08/poumianfenxi/">Cesium-剖面分析</a>
          </li>
        
          <li>
            <a href="/2019/10/08/tongshifenxi/">Cesium-通视分析</a>
          </li>
        
          <li>
            <a href="/2019/10/08/dixingkaiwa2/">Cesium-地形开挖-任意多边形开挖</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 咖啡GIS<br>
      <p>关于博主：咖啡GIS，12年毕业于武汉理工大学GIS专业，毕业后一直从事WebGIS二、三维开发，熟悉LeafLet、OpenLaryes、Cesium等开源框架，在GIS数据采集、制作、项目开发方面有一定的项目经验，并从事过房产、气象、智慧社区等行业，有咨询、交流、合作请联系博主QQ：2034146498</p>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">所有文章</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>